{% load static %}
{% load compress %}

<!DOCTYPE html>

<html lang="ru">

    <head>

        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title>Регистрация | Блокнотик</title>

        <meta name="description" content="Бесплатная онлайн регистрация в Блокнотике">
        <meta name="keywords" content="блокнотик, блокнот онлайн, онлайн тетрадь, заметки онлайн, регистрация, зарегистрироваться, блокнот онлайн бесплатно, текстовик, программа для заметок, совместные заметки, голосовой блокнот онлайн, онлайн блокнот для записей">

        <link rel="icon" type="image/x-icon" href="{% static 'блокнотик.svg' %}">

        {% compress css %}

            <link rel="stylesheet" href="{% static 'scss/auth/login.scss' %}" type="text/x-scss">

        {% endcompress %}

        <script src="{% static 'packages/jquery-3.6.1.min.js' %}"></script>

    </head>

    <body>

        <div class="circle"></div>
        
        <div class="main">

            <div class="wrapper register">

                <div class="brand">
    
                    <div class="wrapper">

                        <svg xmlns="http://www.w3.org/2000/svg" width="19.394" height="28.21" viewBox="0 0 19.394 28.21">
                            <path id="Icon_awesome-lightbulb" data-name="Icon awesome-lightbulb" d="M5.293,25.033a1.764,1.764,0,0,0,.3.975l.942,1.415A1.763,1.763,0,0,0,8,28.21h3.4a1.763,1.763,0,0,0,1.468-.787l.942-1.415a1.762,1.762,0,0,0,.3-.975l0-2.113H5.29l0,2.113ZM0,9.7a9.643,9.643,0,0,0,2.4,6.379,15.834,15.834,0,0,1,2.877,5.039c0,.014.006.043.006.043h8.829c0-.014,0-.028.006-.043a15.834,15.834,0,0,1,2.877-5.039A9.7,9.7,0,1,0,0,9.7ZM9.7,5.289A4.413,4.413,0,0,0,5.289,9.7a.882.882,0,0,1-1.763,0A6.178,6.178,0,0,1,9.7,3.526a.882.882,0,0,1,0,1.763Z" transform="translate(0 0)"></path>
                        </svg>

                    </div>
    
                </div>
    
                <h1>Добро пожаловать в Блокнотик!</h1>

                
                <form method="POST">
                    
                    {% csrf_token %}
                    
                    <div class="unique">

                        <span>Эта почта уже используется</span>

                    </div>
    
                    <div class="fields">
    
                        <div>

                            <svg id="person" xmlns="http://www.w3.org/2000/svg" width="23.339" height="23.34" viewBox="0 0 23.339 23.34">
                                <path id="Icon_ionic-ios-person" data-name="Icon ionic-ios-person" d="M27.828,27.251c-.438-1.933-2.936-2.875-3.8-3.179a28.323,28.323,0,0,0-3.167-.608,3.218,3.218,0,0,1-1.465-.675,12.8,12.8,0,0,1-.1-3,9.016,9.016,0,0,0,.693-1.319,17.013,17.013,0,0,0,.511-2.3s.5,0,.675-.875a8.612,8.612,0,0,0,.45-2.036c-.036-.7-.419-.681-.419-.681a10.657,10.657,0,0,0,.413-3.118c.055-2.5-1.9-4.96-5.446-4.96-3.592,0-5.507,2.462-5.452,4.96a11.116,11.116,0,0,0,.407,3.118s-.383-.018-.419.681a8.612,8.612,0,0,0,.45,2.036c.17.875.675.875.675.875a17.013,17.013,0,0,0,.511,2.3,9.016,9.016,0,0,0,.693,1.319,12.8,12.8,0,0,1-.1,3,3.218,3.218,0,0,1-1.465.675,28.323,28.323,0,0,0-3.167.608c-.863.3-3.361,1.246-3.8,3.179a.486.486,0,0,0,.48.59H27.354A.485.485,0,0,0,27.828,27.251Z" transform="translate(-4.501 -4.5)"/>
                            </svg>

                            <svg id="ne" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Warning Icon "><title>Warning Icon</title><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0.999756C4.13401 0.999756 1 4.13376 1 7.99976C1 11.8657 4.13401 14.9998 8 14.9998C11.866 14.9998 15 11.8657 15 7.99976C15 4.13376 11.866 0.999756 8 0.999756ZM0 7.99976C0 3.58148 3.58172 -0.000244141 8 -0.000244141C12.4183 -0.000244141 16 3.58148 16 7.99976C16 12.418 12.4183 15.9998 8 15.9998C3.58172 15.9998 0 12.418 0 7.99976ZM7.5 8.99951V3.99999H8.5V8.99951H7.5ZM9 11C9 11.5523 8.55228 12 8 12C7.44772 12 7 11.5523 7 11C7 10.4477 7.44772 10 8 10C8.55228 10 9 10.4477 9 11Z" fill="currentColor"></path></svg>

                            <input type="text" name="n" id='n' value="Ваше имя" autocomplete="x">

                        </div>

                        <div>

                            <svg id='email' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="35" height="35" viewBox="0 0 35 35">
                                <defs>
                                  <clipPath id="clip-Пользовательский_размер_1">
                                    <rect width="35" height="35"/>
                                  </clipPath>
                                </defs>
                                <g id="Пользовательский_размер_1" data-name="Пользовательский размер – 1" clip-path="url(#clip-Пользовательский_размер_1)">
                                  <rect width="35" height="35" fill="none"/>
                                  <g id="Icon_feather-mail" data-name="Icon feather-mail" transform="translate(-0.891 0.157)">
                                    <path id="Контур_3" data-name="Контур 3" d="M6.078,6H30.7a3.046,3.046,0,0,1,3.078,2.994V26.958A3.046,3.046,0,0,1,30.7,29.952H6.078A3.046,3.046,0,0,1,3,26.958V8.994A3.046,3.046,0,0,1,6.078,6Z" transform="translate(0)" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"/>
                                    <path id="Контур_4" data-name="Контур 4" d="M33.782,9,18.391,18.973,3,9" transform="translate(0 -0.151)" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"/>
                                  </g>
                                </g>
                            </svg>
                              
                            <svg id="ee" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Warning Icon "><title>Warning Icon</title><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0.999756C4.13401 0.999756 1 4.13376 1 7.99976C1 11.8657 4.13401 14.9998 8 14.9998C11.866 14.9998 15 11.8657 15 7.99976C15 4.13376 11.866 0.999756 8 0.999756ZM0 7.99976C0 3.58148 3.58172 -0.000244141 8 -0.000244141C12.4183 -0.000244141 16 3.58148 16 7.99976C16 12.418 12.4183 15.9998 8 15.9998C3.58172 15.9998 0 12.418 0 7.99976ZM7.5 8.99951V3.99999H8.5V8.99951H7.5ZM9 11C9 11.5523 8.55228 12 8 12C7.44772 12 7 11.5523 7 11C7 10.4477 7.44772 10 8 10C8.55228 10 9 10.4477 9 11Z" fill="currentColor"></path></svg>

                            <input type="text" name="u" id="e" value="Электронная почта" autocomplete="x">

                        </div>

                        <div>

                            <svg id='lock' xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="35" height="35" viewBox="0 0 35 35">
                                <defs>
                                  <clipPath id="clip-Пользовательский_размер_1">
                                    <rect width="35" height="35"/>
                                  </clipPath>
                                </defs>
                                <g id="Пользовательский_размер_1" data-name="Пользовательский размер – 1" clip-path="url(#clip-Пользовательский_размер_1)">
                                  <rect width="35" height="35" fill="none"/>
                                  <path id="Icon_ionic-ios-lock" data-name="Icon ionic-ios-lock" d="M30.072,15.369h-2v-3.89a8,8,0,1,0-15.992-.108v4h-2A3.341,3.341,0,0,0,6.75,18.7V34.693a3.341,3.341,0,0,0,3.332,3.332h19.99A3.341,3.341,0,0,0,33.4,34.693V18.7A3.341,3.341,0,0,0,30.072,15.369ZM21.243,25.764v5.731a1.194,1.194,0,0,1-1.108,1.2,1.167,1.167,0,0,1-1.224-1.166V25.764a2.665,2.665,0,1,1,2.332,0Zm4.5-10.395H14.413v-4a5.664,5.664,0,0,1,11.328,0Z" transform="translate(-2.577 -3.2)"/>
                                </g>
                            </svg>                              

                            <svg id="pe" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Warning Icon "><title>Warning Icon</title><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0.999756C4.13401 0.999756 1 4.13376 1 7.99976C1 11.8657 4.13401 14.9998 8 14.9998C11.866 14.9998 15 11.8657 15 7.99976C15 4.13376 11.866 0.999756 8 0.999756ZM0 7.99976C0 3.58148 3.58172 -0.000244141 8 -0.000244141C12.4183 -0.000244141 16 3.58148 16 7.99976C16 12.418 12.4183 15.9998 8 15.9998C3.58172 15.9998 0 12.418 0 7.99976ZM7.5 8.99951V3.99999H8.5V8.99951H7.5ZM9 11C9 11.5523 8.55228 12 8 12C7.44772 12 7 11.5523 7 11C7 10.4477 7.44772 10 8 10C8.55228 10 9 10.4477 9 11Z" fill="currentColor"></path></svg>

                            <input name="p" id="p" value="Пароль" autocomplete="x">

                        </div>
                        
                    </div>

                    <span class="error" id="symbols">Хотя бы 8 символов</span>
                    <span class="error" id="number">Хотя бы одна цифра</span>
    
                    <div class="btns register">

                        <button type="submit" class="btn" id="r" disabled>Зарегистрироваться</button>

                        <a href="{% url 'user:login' %}">

                            <button type="button" class="btn">У меня есть аккаунт</button>

                        </a>

                    </div>

                    <div class="oauth2" style="top: 10px;">

                        <h4 style="left: -2px;">Зарегистрироваться с помощью</h4>

                        <div class="oauth2-path">

                            <img style="transform: scale(0.8);display: block;-webkit-user-select: none;margin: auto;background-color: hsl(0, 0%, 90%);transition: background-color 300ms;" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAhFBMVEUAAAD/QBD6QBv9Px39Pxz8Px38Px38Ph73QBj7Phz/QBj9Ph79Ph38Px36QBv8Syv9k4D+z8b+5+P////9e2P/8/H+z8f+29T6Ph3/5+P9b1X8b1b/QCD6QB39n478PRv9Px78Px78Vzn+n479h3L+w7j9h3H+t6r3QCD/QCD7QBz6QCDOZRTsAAAALHRSTlMAEGCfz+//XyCQII+P3zD///////////+g////EGD/YM/v////////ICCQMIP7B0QAAAEJSURBVHgBfZNVAsIwEAVfJYvr1ou73P9+1NIYMD+xyUoFCs8PQkEkwmDgwWU4EqQIxjDxJmQxNa/PyGGmBZmrc92Y/7uvx/D688VyteaGzvBQ09cXxSzRKx325/XJOklSJVCdJKOOnDkviKjUhBGwkfN6PyJLEB62cr5jjskWaI9ME3JXCHD4HyHEUU4LZi4cQYAki5g5X9gCQU2XXBknRziq+bk2LnaKA5kGR1aRGWlc6zKsNn1S3KojK8UAG1XEKWe+W0V6wIgkd7eLAMDDTGAKT1SM9ASm8ELNZqYSmMJsg4bHr4/2iY73V2P2hkTFsO4rNiOyeG1g8shIIUZPuGy2Wff7+9rtD16oI5nrN5CoAAAAAElFTkSuQmCC">                        
                        
                        </div>

                        <div class="oauth2-path">

                            <svg style="transform: scale(1.4);" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none"><path d="M1.667 9.667c0-3.771 0-5.657 1.171-6.829C4.01 1.667 5.895 1.667 9.667 1.667h.666c3.772 0 5.657 0 6.829 1.171 1.171 1.172 1.171 3.058 1.171 6.829v.666c0 3.772 0 5.657-1.171 6.829-1.172 1.171-3.057 1.171-6.829 1.171h-.666c-3.772 0-5.657 0-6.829-1.171-1.171-1.172-1.171-3.057-1.171-6.829v-.666Z" fill="#07F"/><path d="M10.535 13.674c-3.799 0-5.965-2.605-6.056-6.938h1.903c.063 3.18 1.465 4.528 2.576 4.806V6.736h1.792V9.48c1.097-.118 2.25-1.368 2.639-2.743h1.792c-.299 1.695-1.549 2.945-2.438 3.458.889.417 2.313 1.507 2.854 3.48h-1.972c-.424-1.32-1.48-2.34-2.875-2.48v2.48h-.215Z" fill="#fff"/></svg>

                        </div>

                        <div class="oauth2-path">

                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"><path d="m5.319 14.504-.835 3.118-3.054.065A11.946 11.946 0 0 1 0 12c0-1.99.484-3.866 1.342-5.519l2.719.499 1.19 2.702A7.133 7.133 0 0 0 4.868 12c0 .881.16 1.725.452 2.504z" fill="#FBBB00"/><path d="M23.79 9.758a12.028 12.028 0 0 1-.053 4.747 11.998 11.998 0 0 1-4.225 6.853l-3.424-.175-.485-3.025a7.152 7.152 0 0 0 3.077-3.652h-6.416V9.758H23.79z" fill="#518EF8"/><path d="M19.512 21.357A11.95 11.95 0 0 1 12 24c-4.57 0-8.543-2.554-10.57-6.313l3.889-3.184a7.135 7.135 0 0 0 10.284 3.654l3.909 3.2z" fill="#28B446"/><path d="m19.66 2.763-3.888 3.182a7.137 7.137 0 0 0-10.52 3.736l-3.91-3.2A11.998 11.998 0 0 1 12 0a11.95 11.95 0 0 1 7.66 2.763z" fill="#F14336"/></svg>

                        </div>

                        <div class="oauth2-path">

                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"><rect width="24" height="24" rx="4" fill="#005FF9"/><path d="M14.707 12A2.71 2.71 0 0 1 12 14.707 2.71 2.71 0 0 1 9.293 12 2.71 2.71 0 0 1 12 9.293 2.71 2.71 0 0 1 14.707 12zM12 3c-4.963 0-9 4.037-9 9s4.037 9 9 9a8.948 8.948 0 0 0 5.07-1.565l.025-.018-1.212-1.41-.02.013A7.12 7.12 0 0 1 12 19.155c-3.945 0-7.155-3.21-7.155-7.155 0-3.945 3.21-7.155 7.155-7.155 3.945 0 7.155 3.21 7.155 7.155 0 .511-.057 1.029-.168 1.538-.227.929-.877 1.213-1.365 1.175-.491-.04-1.066-.39-1.07-1.245V12A4.557 4.557 0 0 0 12 7.448 4.557 4.557 0 0 0 7.448 12 4.557 4.557 0 0 0 12 16.552c1.22 0 2.363-.476 3.225-1.343a2.925 2.925 0 0 0 2.49 1.353c.656 0 1.304-.219 1.828-.616.539-.41.942-1.002 1.165-1.713.035-.115.1-.378.1-.38l.002-.01c.132-.57.19-1.14.19-1.843 0-4.963-4.037-9-9-9z" fill="#FF9E00"/></svg>
                        
                        </div>
                        
                        <div class="oauth2-path">

                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none"><path d="M12.001 4.328a2.353 2.353 0 0 1 2.35 2.35 2.353 2.353 0 0 1-2.35 2.35 2.353 2.353 0 0 1-2.35-2.35A2.353 2.353 0 0 1 12 4.328zm0 8.026a5.683 5.683 0 0 0 5.678-5.676A5.684 5.684 0 0 0 12.001 1a5.684 5.684 0 0 0-5.678 5.678 5.683 5.683 0 0 0 5.678 5.676zm2.297 4.631a10.629 10.629 0 0 0 3.297-1.365 1.663 1.663 0 0 0-1.772-2.816 7.21 7.21 0 0 1-7.644 0 1.662 1.662 0 0 0-2.508 1.778c.098.43.363.803.736 1.038a10.64 10.64 0 0 0 3.296 1.365L6.53 20.16a1.664 1.664 0 0 0 2.353 2.352l3.119-3.119 3.12 3.12a1.66 1.66 0 0 0 2.712-.54 1.662 1.662 0 0 0-.361-1.812l-3.174-3.176z" fill="#EB722E"/></svg>                        
                        
                        </div>
                        
                    </div>
    
                </form>
    
            </div>

        </div>

    </body>

    <style>

        @font-face {
            font-family: Comfortaa;
            src: url("{% static 'fonts/Comfortaa.ttf' %}");
        }

        body {

            font-family: Comfortaa;

        }

        button {

            font-family: Comfortaa;
            cursor: pointer;
            border: none;
            border-radius: 100px;

        }

        input {

            font-family: Comfortaa;

        }

    </style>

    <!-- OAUTH2 -->
    <script>

        $('.oauth2-path').click(function() {

            var path = $(this);

            path.addClass('in');

            setTimeout(function() {

                path.removeClass('in');

            }, 250);

        });

    </script>

    <script>

        $('#email, #lock, #person').click(function() {

            $(this).siblings('input').focus();

        });

        function delay(callback, ms) {

            var timer = 0;

            return function() {

                var context = this, args = arguments;
                clearTimeout(timer);
                
                timer = setTimeout(function () {

                    callback.apply(context, args);

                }, ms || 0);
            };
            
        }

        function hasNumber(myString) {

            return /\d/.test(myString);
        
        }

        /* ВАЛИДАЦИЯ ВСЕХ ПОЛЕЙ */

        var n, e, p;

        function v() {

            /* Все еще есть проблема с проверкой ошибок при повторном вводе почты после того как бэк выяснил, что она не уникальная */

            if (n && e && p) {

                $('#r').prop('disabled', false);

            } else {

                $('#r').prop('disabled', true);

            }

        }
        
        $('button').click(function() {

            btn = $(this).addClass('in');

            setTimeout(function() {

                btn.removeClass('in');

            }, 250);
            
        })

        document.getElementById('n').addEventListener('input', function() {

            $('#ne').css('opacity', 0);

            $('#r').prop('disabled', true);

        });

        document.getElementById('n').addEventListener('input', delay(function() {

            if (!$('#n').val()) {

                $('#ne').css('opacity', 1);
                n = false;

            } else {

                n = true;

            }

            v();

        }, 500));

        function validateEmail(e) {

            var re = /\S+@\S+\.\S+/;
            return re.test(e);

        }

        /* PLACHOLDER MANIPULATION */

        $('input').focus(function() {

            field = $(this);

            field.css('color', '#1E2330');

            fieldName = field.val();

            if (fieldName == 'Электронная почта' || fieldName == 'Ваше имя' || fieldName == 'Пароль') {

                field.val('');

            }

            if (fieldName == 'Пароль') {

                field.attr('type', 'password');

            }

        });

        $('input').focusout(function() {

            field = $(this);

            fieldID = field.attr('id');
            fieldValue = field.val();

            if (fieldValue == '') {

                field.css('color', '#6e7267');

                if (fieldID == 'n') {

                    field.val('Ваше имя');

                } else if (fieldID == 'e') {

                    field.val('Электронная почта');

                } else {

                    field.attr('type', 'text');
                    field.val('Пароль');

                }

            }

        });

        /* Email */

        document.getElementById('e').addEventListener('input', function() {

            $('.unique').css('opacity', 0);
            $('#ee').css('opacity', 0);

            $('#r').prop('disabled', true);

        });

        document.getElementById('e').addEventListener('input', delay(function() {

            if (validateEmail($('#e').val())) {

               $.ajax({

                    type: 'POST',

                    url: "{% url 'user:ce' %}",

                    data: {

                        'csrfmiddlewaretoken': '{{csrf_token}}',
                        'e': $('#e').val(),

                    },

                    success: function(response, status, XHR) {

                        var u = response['u'];

                        if (u == 'n') {

                            $('.unique').css('opacity', 1);
                            $('#ee').css('opacity', 1);
                            e = false;
                            
                        } else {
                            
                            e = true;

                        }

                    }

               });

            } else {

                $('#ee').css('opacity', 1);
                e = false;

            }

            v();

        }, 500));

        /* Password */

        document.getElementById('p').addEventListener('input', delay(function() {

            $('.error').css('opacity', 0);
            $('#pe').css('opacity', 0);

            $('#r').prop('disabled', true);

        }))

        document.getElementById('p').addEventListener('input', delay(function() {

            $('.error').css('opacity', 0);
            $('#pe').css('opacity', 0);

            p = $(this).val();

            if (p.length > 7) {

                if(hasNumber(p)) {

                    $('#number').css('opacity', 0);
                    p = true;

                } else {

                    $('#number').css('opacity', 1);
                    $('#pe').css('opacity', 1);
                    p = false;

                }

            } else {

                $('#symbols').css('opacity', 1);
                $('#pe').css('opacity', 1);
                p = false;

            }

            v();

        }, 500));

    </script>

</html>